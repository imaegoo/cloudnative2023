FROM maven:3-eclipse-temurin-8-alpine as builder

ADD ./server/ /root/server/
WORKDIR /root/server/
RUN mvn --batch-mode clean package

FROM eclipse-temurin:8-alpine

COPY --from=builder /root/server/target/cloudnative2023-0.0.1-SNAPSHOT.jar /root/server/target/cloudnative2023-0.0.1-SNAPSHOT.jar
ENTRYPOINT ["java", "-jar", "/root/server/target/cloudnative2023-0.0.1-SNAPSHOT.jar"]
EXPOSE 8080
