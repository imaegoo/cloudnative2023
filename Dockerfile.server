FROM container-registry.oracle.com/graalvm/community:ol9-java17-22 as builder

ADD ./server/ /root/server/
WORKDIR /root/server/
RUN gu install native-image && bash ./mvnw --batch-mode clean package -Pnative

FROM ubuntu:latest

COPY --from=builder /root/server/target/cloudnative2023 /root/cloudnative2023
ENTRYPOINT ["/root/cloudnative2023"]
EXPOSE 8080
